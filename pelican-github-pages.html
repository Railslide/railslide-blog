<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Railslide, Code, experiments, and thoughts">

        <link rel="alternate"  href="http://railslide.io/feeds/all.atom.xml" type="application/atom+xml" title="Railslide Full Atom Feed"/>

        <title>How to set up Pelican on GitHub pages // Railslide // Code, experiments, and thoughts</title>


    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.3.0/pure-min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.1.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="http://railslide.io/theme/css/puremorning.css">
    <link rel="stylesheet" href="http://railslide.io/theme/css/pygments.css">

    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/fitvids/1.0.1/jquery.fitvids.min.js"></script>
    <script>
        $(document).ready(function(){
            $(".content").fitVids();
        });
    </script>
</head>

<body>
    <div class="pure-g-r" id="layout">
        <div class="sidebar pure-u">
            <div class="cover-img">
                <div class="cover-body">
                    <header class="header">
                        <hgroup>
                            <h1 class="brand-main"><a href="/">Railslide</a></h1>
                            <p class="tagline">Code, experiments, and thoughts</p>
                                <p class="links"><a href="about.html">About</a></p>
                                <p class="social">
                                    <a href="https://github.com/Railslide/">
                                        <i class="fa fa-github fa-3x"></i>
                                    </a>
                                    <a href="feeds/all.atom.xml">
                                        <i class="fa fa-rss fa-3x"></i>
                                    </a>
                                </p>
                        </hgroup>
                    </header>
                </div>
            </div>
        </div>
    <div class="pure-u">
        <div class="content">
            <section class="post">
                <header class="post-header">
                    <h1>How to set up Pelican on GitHub pages</h1>
                        <p class="post-meta">
                        category: <a href="http://railslide.io/category/pelican.html">pelican</a>, date: 09-06-2014
                        </p>
                        <p class="post-meta">
                            tags =                                 <a class="post-category" href="http://railslide.io/tag/pelican.html">pelican</a>
                                <a class="post-category" href="http://railslide.io/tag/publishing.html">publishing</a>
                                <a class="post-category" href="http://railslide.io/tag/github-pages.html">github pages</a>
                </header>
            </section>
            <p>Although the web is plenty of blog posts about how to set up a Pelican powered blog on GitHub pages, I still had to glean information from several sources and mix it with a bit of experimentation before being able to have my blog up and running. So hopefully this post will make someone's life easier, other than being a future reference for myself.</p>
<p>Before starting I need to give credit where credit is due, since <a href="http://mathamy.com/migrating-to-github-pages-using-pelican.html">this post</a> by Amy Hanlon and <a href="http://martinbrochhaus.com/pelican2.html">this one</a> by Martin Brochhaus have been a tremendous starting point for my trial-and-error journey. Once said that, we can start.</p>
<h1>1. Setting up GitHub project pages</h1>
<p>GitHub offers the possibility to host your site in the cloud through either <a href="https://help.github.com/articles/user-organization-and-project-pages">personal or project pages</a>. Although it is possible to use both for hosting a Pelican powered blog, project pages make your life so much easier when it comes both to publish your blog content and to put blog source under revision control.</p>
<p>For creating project pages, all we need to do is to create a repository as usual and put the content we wish to publish (i.e. the HTML static files) into a branch named <code>gh-pages</code>. Once done that, your page will show up at username.github.io/repository.</p>
<p>Although it could sounds overly complicated - especially the <code>gh-pages</code> branch part - you don't have to worry since an awesome program called <a href="https://github.com/davisp/ghp-import">ghp-import</a> will take care of it for us. For now, simply create a new repository as you would do for any other project and set up a <code>.gitignore</code> file with the following content:</p>
<div class="highlight"><pre><span></span><span class="err">*.pid</span>
<span class="err">*.pyc</span>
<span class="err">output/</span>
</pre></div>


<h1>2. Installing the needed packages</h1>
<p>Before installing Pelican, I would recommend to create a new virtualenv. It is not mandatory, but it is definitely a good practice and would prevent the risk of conflicts between installed packages.</p>
<p>NOTE: Pelican documentation recommends to use Pelican with Python 2.7. I am keeping up with <a href="http://railslide.io/virtualenvwrapper-python3.html">my pledge of using Python 3 whenever possible</a>, as well as giving a try with Python 3.4 (Ubuntu 14.04 default version). Everything works fine so far and anyways these instructions are version agnostic - just be aware of it and choose your Python version accordingly.</p>
<p>Install pelican and ghp-import</p>
<div class="highlight"><pre><span></span>pip install pelican
pip install -e git+git://github.com/davisp/ghp-import.git#egg<span class="o">=</span>ghp-import
</pre></div>


<p>Next run <code>pelican-quickstart</code> and get ready to answer to a bunch of questions. Most of them are pretty straightforward and anyway you'll be able to change them later in your settings files. These are the only ones you need to care about for the moment:</p>
<div class="highlight"><pre><span></span>Where <span class="k">do</span> you want to create your new web site? <span class="o">[</span>.<span class="o">]</span> <span class="c1"># Press enter</span>
Do you want to specify a URL prefix? e.g., http://example.com <span class="o">(</span>Y/n<span class="o">)</span> <span class="c1"># y</span>
What is your URL prefix? <span class="o">(</span>see above example<span class="p">;</span> no trailing slash<span class="o">)</span> <span class="c1"># http://username.github.io/repository</span>
Do you want to generate a Fabfile/Makefile to automate generation and publishing? <span class="o">(</span>Y/n<span class="o">)</span> <span class="c1"># y</span>
</pre></div>


<p>Answer <code>n</code> to all the questions about uploading your website and you are ready to go.</p>
<h1>3. Writing content</h1>
<p>Fire up your favorite text editor and write your blog content in either Markdown or reStructuredText. Once you have done, save it in the content folder. For previewing it:</p>
<div class="highlight"><pre><span></span>make devserver
<span class="c1"># go to http://localhost:8000 and check if everything looks good</span>
^C <span class="c1"># note that CTRL+C won&#39;t stop dev server</span>
./develop_server.sh stop <span class="c1"># manually stop the dev server</span>
</pre></div>


<h1>4. Publishing and pushing</h1>
<p>Ok this is the easy part.</p>
<div class="highlight"><pre><span></span><span class="c1"># pushing the source repo</span>
git push origin master

<span class="c1"># push the output folder to GitHub pages</span>
make github

<span class="c1"># celebrate!</span>
</pre></div>


<p>Congrats! Your blog is now up and running!</p>
<h1>5. Setting up your custom domain</h1>
<p>Create a CNAME file containing your bare domain:</p>
<div class="highlight"><pre><span></span><span class="err">mydomain.com</span>
</pre></div>


<p>Add the following lines to your pelicanconf.py, in order to make Pelican copying it to your output folder on every publish.</p>
<div class="highlight"><pre><span></span><span class="n">STATIC_PATHS</span> <span class="o">=</span> <span class="p">[</span>
<span class="s1">&#39;CNAME&#39;</span>
<span class="p">]</span>
</pre></div>


<p>Then, assuming that you want both mydomain.com and www.mydomain.com to point at your blog, you need to set <strong>both the CNAME and the A-records</strong> of your domain to point at github.</p>
<p>Since this has been the most problematic step for me, here's a couple of extra thoughts regarding my domain registrar (Gandi):</p>
<ol>
<li>Make sure to not have any other A-record</li>
<li>Using Gandi's web forwarding instead of setting both the CNAME and the A-records resulted in a redirect loop error</li>
<li>You can take the rest of the zone file data from Gandi's default one</li>
<li>Testing from different browsers and refreshing several times can help spotting some very sneaky bugs</li>
<li><a href="http://stackoverflow.com/a/22374542/2926113">This answer</a> from Stack Overflow provides great step-by-step instructions for using GitHub project pages with a custom domain</li>
</ol>
<p>Here are the lines taking care of the magic in my case:</p>
<div class="highlight"><pre><span></span><span class="err">www 10800 IN CNAME railslide.github.io.</span>
<span class="err">@ 10800 IN A 192.30.252.153</span>
<span class="err">@ 10800 IN A 192.30.252.154</span>
</pre></div>


<p>After that, wait some hours for the DNS to propagate and you should be done.</p>
            <a href="#" class="go-top">Go Top</a>
<footer class="footer">
    <p>&copy; Railslide <a href="http://creativecommons.org/licenses/by-sa/4.0/">(CC BY-SA 4.0)</a> &ndash;
        Built with <a href="http://blog.getpelican.com/">Pelican</a>
        and a modified version of <a href="https://github.com/PurePelicanTheme/pure-single">Pure Theme</a>
    </p>
</footer>        </div>
    </div>
    </div>
    <script>
        var $top = $('.go-top');

        // Show or hide the sticky footer button
        $(window).scroll(function() {
            if ($(this).scrollTop() > 200) {
                $top.fadeIn(200);
            } else {
                $top.fadeOut(200);
            }
        });

        // Animate the scroll to top
        $top.click(function(event) {
            event.preventDefault();
            $('html, body').animate({scrollTop: 0}, 300);
        })

        // Makes sure that the href="#" attached to the <a> elements
        // don't scroll you back up the page.
        $('body').on('click', 'a[href="#"]', function(event) {
            event.preventDefault();
        });
    </script>

</body>
</html>